<html>
<head>
  <!--  <script src="d3.v3.min.js" charset="utf-8"></script> -->
  <script src="https://d3js.org/d3.v5.min.js" charset="utf-8"></script>
  <script src="js/d3-msg-seq.js"></script>
  <link href="css/app.css" rel="stylesheet">

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
  <title>M3 flows</title>

  <!-- Bootstrap -->
  <link href="css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

  <body>
    <h1>M3 Universal Slot booking Carrier ignores confirmation</h1>
    <a class="btn btn-primary" href="index.html" role="button">Back</a></p>


    <div id="kaiflow"></div>

    <script>
      var msg_seq = d3.messageSequence().fade(0);

      d3.select('#kaiflow')
      .append("svg")
      .attr("width", "100%")
      .attr("height", "100%")
      .call(msg_seq)

      function delay_add(messages) {
        var msg = messages.shift();
        if (msg) {
          msg_seq.addMessage(msg);
          setTimeout(function() { delay_add(messages)}, 500);
        }
      }

      delay_add([
        {from: "Blue Jay", to: "Universal Slot Booking", msg: "New Booking"},
        {from: "Universal Slot Booking", to: "Universal Slot Booking", msg: "Find and pre-book first available slot"},
        {from: "Universal Slot Booking", to: "carrier", msg: "please confirm slot"},
        {from: "Universal Slot Booking", to: "Universal Slot Booking", msg: "Planning cutoff time reached"},
        {from: "Universal Slot Booking", to: "Universal Slot Booking", msg: "mark slot unconfirmed after cutoff time"},
        {from: "Universal Slot Booking", to: "Control Tower", msg: "inform control tower 'Unconfirmed slot warning'"},
        {from: "Universal Slot Booking", to: "carrier", msg: "please confirm slot, this is your last warning"},

        // {from: "customer", to: "barrista1", msg: "pay order"},
        // {from: "barrista2", to: "barrista2", msg: "get chai mix"},
        // {from: "barrista2", to: "barrista2", msg: "add flavor"},
        // {from: "barrista2", to: "barrista2", msg: "add milk"},
        // {from: "barrista2", to: "barrista2", msg: "add ice"},
        // {from: "barrista2", to: "barrista2", msg: "swirl"},
        // {from: "barrista2", to: "customer", msg: "give tasty beverage"},
        // {from: "customer", to: "tasty beverage", msg: "sip"},
        // {from: "tasty beverage", to: "customer", msg: "burn"},
        // {from: "customer", to: "customer", msg: "cry"},
        // {from: "customer", to: "manager", msg: "complain"},
        // {from: "manager", to: "barrista1", msg: "fire"},
        // {from: "manager", to: "barrista2", msg: "fire"},
      ])

      </script>
    </body>
    </html>
