<html>
<head>
  <!--  <script src="d3.v3.min.js" charset="utf-8"></script> -->
  <script src="https://d3js.org/d3.v5.min.js" charset="utf-8"></script>
  <script src="js/d3-msg-seq.js"></script>

  <style>
    #container {
      width: 100%;
      height: 100%;
    }

    text {
      font-family: sans-serif;
    }

    g.actor line {
      stroke: lightgray;
      stroke-width: 1px;
    }

    g.message text {
      font-family: monospace;
    }

    g.message line {
      stroke: black;
      stroke-width: 2px;
    }

    g.message path {
      stroke: black;
      stroke-width: 2px;
    }
    </style>
        
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>M3 flows</title>

    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
  </head>
  <body>

    <body>
      <h1>M3 Universal Slot booking Happy Flow</h1>
      <a class="btn btn-primary" href="index.html" role="button">Back</a></p>


      <div id="container"></div>

      <script>
        var msg_seq = d3.messageSequence().fade(0);

        d3.select('#container')
        .append("svg")
        .attr("width", "100%")
        .attr("height", "100%")
        .call(msg_seq)

        function delay_add(messages) {
          var msg = messages.shift();
          if (msg) {
            msg_seq.addMessage(msg);
            setTimeout(function() { delay_add(messages)}, 500);
          }
        }

        delay_add([
          {from: "Blue Jay", to: "Universal Slot Booking", msg: "New Booking"},
          {from: "Universal Slot Booking", to: "Universal Slot Booking", msg: "Find and pre-book first available slot"},
          {from: "Universal Slot Booking", to: "carrier", msg: "please confirm slot"},
          {from: "carrier", to: "Universal Slot Booking", msg: "slot confirmation"},
          {from: "Universal Slot Booking", to: "Universal Slot Booking", msg: "slot confirmed"},
          {from: "Universal Slot Booking", to: "Blue Jay", msg: "add track and trace record"},
          // {from: "customer", to: "barrista1", msg: "pay order"},
          // {from: "barrista2", to: "barrista2", msg: "get chai mix"},
          // {from: "barrista2", to: "barrista2", msg: "add flavor"},
          // {from: "barrista2", to: "barrista2", msg: "add milk"},
          // {from: "barrista2", to: "barrista2", msg: "add ice"},
          // {from: "barrista2", to: "barrista2", msg: "swirl"},
          // {from: "barrista2", to: "customer", msg: "give tasty beverage"},
          // {from: "customer", to: "tasty beverage", msg: "sip"},
          // {from: "tasty beverage", to: "customer", msg: "burn"},
          // {from: "customer", to: "customer", msg: "cry"},
          // {from: "customer", to: "manager", msg: "complain"},
          // {from: "manager", to: "barrista1", msg: "fire"},
          // {from: "manager", to: "barrista2", msg: "fire"},
        ])

        </script>
      </body>
      </html>
